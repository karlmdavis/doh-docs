--- 
title: Eddings Web Server
kind: topic
summary: "Describes the steps necessary to make eddings a web server."
---


# <%= @item[:title] %>

This <%= topic_link("/it/davis/servers/eddings/") %> sub-guide describes the steps necessary to make the computer a web server, using [Apache httpd](http://httpd.apache.org/).

Previously, I'd been using `tolkien` as a web server, which has now been decommissioned. The documentation for the old `tolkien` web server is archived in the following pages:

* <%= wiki_entry_link("TolkienSetupSvn") %>
* <%= wiki_entry_link("TolkienSetupTrac") %>
* <%= wiki_entry_link("TolkienSetupWebDav") %>
* <%= wiki_entry_link("TolkienSetupWordpress") %>

Please note that all of those services (SVN, Trac, WebDAV, and WordPress) are no longer being used. I was uncomfortable with their security and usabilty and have opted for the following alternatives:

* My SVN repositories were all migrated to [GitHub](https://github.com/karlmdavis) and [bitbucket](https://bitbucket.org/karlmdavis).
* My Trac projects have all been either converted into this [nanoc](http://nanoc.stoneship.org/)-powered site or archived.
* My WebDAV shares were all decommissioned.
* My WordPress blog was migrated into this [nanoc](http://nanoc.stoneship.org/)-powered site: <%= topic_link("/blog/") %>.

The portions of my web content now generated by [nanoc](http://nanoc.stoneship.org/) are all hosted by the [Apache httpd](http://httpd.apache.org/) server described in this page.

Much of the content for this page was derived from Ubuntu's Apache web server documentation: <https://help.ubuntu.com/10.04/serverguide/httpd.html>.


## Installing Apache httpd

[Apache's httpd](http://www.isc.org/software/bind) seems to be, by far, the most popular web server package for Linux. I've had good success with it, myself. Installing it is as simple as:

    $ sudo apt-get install apache2


## Basic Configuration

The Apache web server supports [virtual hosts](http://httpd.apache.org/docs/2.2/vhosts/): the ability to serve different web sites based on the URL and/or IP used to access the site. The default Ubuntu install of Apache will create and enable a `default` virtual site that displays a basic "It Works!" message. We want to disable this site:

    $ sudo a2dissite default
    $ sudo /etc/init.d/apache2 reload


### Create Site: justdavis.com

References:

* <http://httpd.apache.org/docs/2.2/vhosts/ip-based.html>
* <http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html>
* <http://httpd.apache.org/docs/2.2/mod/core.html#options>

The `justdavis.com` domain will be used to serve static web content generated by `nanoc`.

Create the folders that will be used to store the content, logs, etc. for the site:

    $ sudo mkdir -p /var/apache2/justdavis.com/www/
    $ sudo mkdir -p /var/apache2/justdavis.com/logs/
    $ sudo chown -R root:root /var/apache2/justdavis.com/
    $ sudo chmod -R u=rwX,g=rX,o=rX /var/apache2/justdavis.com/

Create the site configuration in `/etc/apache2/sites-available/justdavis.com`:

~~~~
<VirtualHost 174.79.40.37:80>
	DocumentRoot /var/apache2/justdavis.com/www/
	ErrorLog /var/apache2/justdavis.com/logs/error_log
	LogLevel warn
	TransferLog /var/apache2/justdavis.com/logs/access_log

	ServerName justdavis.com
	ServerAdmin webmaster@justdavis.com

	Options FollowSymLinks

	# Redirects from http://madrivercode.com/blog/ to http://justdavis.com/karl/blog/
	RewriteEngine on
	# Redirect: resume:
	RewriteRule ^/blog/wp-content/uploads/2009/03/karlmdavis-resume.pdf(.*) http://justdavis.com/karl/downloads/karlmdavis-swEngineer-resume.pdf [R=permanent,L]
	# Redirect: 2009-03-21 article:
	RewriteRule ^/blog/coding/native-libraries-vcs-and-maven(.*) http://justdavis.com/karl/blog/2009/03/21/intrepid_vpn_troubles.html [R=permanent,L]
	# Redirect: 2009-09-05 article:
	RewriteRule ^/blog/uncategorized/a-sad-tale-of-vpn-troubles-on-intrepid/(.*) http://justdavis.com/karl/blog/2009/09/05/native_libraries_maven.html [R=permanent,L]
	# Redirect: everything else:
	RewriteRule ^/blog(.*) http://justdavis.com/karl/blog/ [R=permanent,L]
</VirtualHost>
~~~~

Enable the site as follows:

    $ sudo a2enmod rewrite
    $ sudo a2ensite justdavis.com
    $ sudo /etc/init.d/apache2 restart


